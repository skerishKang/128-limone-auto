"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[985],{2985:function(e,s,t){t.r(s),t.d(s,{default:function(){return d}});var l=t(5893),a=t(7294),n=t(9802),r=t(424);function i(e){let{isOpen:s,onClose:t,children:a}=e;return s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:" fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity ",onClick:t}),(0,l.jsxs)("div",{className:"fixed top-0 right-0 h-full w-80 bg-white shadow-xl z-50 transform transition-transform "+(s?"translate-x-0":"translate-x-full"),children:[(0,l.jsxs)("div",{className:"p-4 border-b flex items-center justify-between",children:[(0,l.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:"메뉴"}),(0,l.jsx)("button",{onClick:t,className:" p-2 rounded-lg hover:bg-gray-100 transition-colors ",children:"✕"})]}),(0,l.jsx)("div",{className:"h-[calc(100%-64px)] overflow-y-auto",children:a})]})]}):null}var c=t(284),o=t(3411);function d(){let{conversations:e,isLoading:s,createConversation:t,updateConversationTitle:d}=(0,c.B)(),[x,m]=(0,a.useState)(!1),[h,g]=(0,a.useState)(null),[j,u]=(0,a.useState)(!1),b=async()=>{try{u(!0);let e=await t();g(e.id),m(!1)}catch(e){console.error("Failed to create conversation:",e)}finally{u(!1)}},f=e=>{g(e),m(!1)};return(0,l.jsxs)("div",{className:"h-screen relative bg-white",children:[(0,l.jsxs)("header",{className:"bg-yellow-400 p-4 flex items-center justify-between shadow-sm",children:[(0,l.jsx)("h1",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:"\uD83C\uDF4B Limone"}),(0,l.jsx)("button",{onClick:()=>m(!x),className:" p-2 rounded-lg hover:bg-yellow-500 transition-colors text-xl ",children:"☰"})]}),(0,l.jsx)("main",{className:"h-[calc(100vh-64px)]",children:(0,l.jsx)(n.Z,{conversationId:h||0,conversations:e,onSelectConversation:f,onUpdateTitle:d,isLoading:s})}),(0,l.jsxs)(i,{isOpen:x,onClose:()=>m(!1),children:[(0,l.jsx)("div",{className:"p-4 border-b",children:(0,l.jsx)("button",{onClick:b,disabled:j,className:" w-full px-4 py-3 bg-yellow-400 hover:bg-yellow-500 disabled:bg-gray-300 text-gray-900 rounded-lg font-medium text-sm transition-colors flex items-center justify-center gap-2 ",children:j?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Z,{size:"sm"}),"생성 중..."]}):(0,l.jsx)(l.Fragment,{children:"➕ 새 채팅"})})}),(0,l.jsxs)("div",{className:"p-2",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-gray-600 mb-2 px-2",children:"대화 목록"}),s?(0,l.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,l.jsx)(o.Z,{})}):0===e.length?(0,l.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[(0,l.jsx)("p",{children:"대화가 없습니다"}),(0,l.jsx)("p",{className:"text-sm mt-2",children:"새 채팅을 시작하세요!"})]}):(0,l.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,l.jsxs)("div",{onClick:()=>f(e.id),className:"\n                    p-3 rounded-lg cursor-pointer\n                    transition-colors\n                    ".concat(h===e.id?"bg-yellow-100 border-2 border-yellow-400":"bg-gray-50 hover:bg-gray-100","\n                  "),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h4",{className:"font-medium text-gray-800 truncate text-sm",children:e.title}),(0,l.jsx)("span",{className:"text-xs text-gray-500",children:e.message_count||0})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.created_at).toLocaleDateString("ko-KR")})]},e.id))})]}),(0,l.jsxs)("div",{className:"p-4 border-t",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-gray-600 mb-2",children:"서비스 위젯"}),(0,l.jsx)(r.Z,{})]})]})]})}}}]);